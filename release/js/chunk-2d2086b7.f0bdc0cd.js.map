{"version":3,"sources":["webpack:///./src/views/Login.vue?8d7b","webpack:///./src/components/LoginForm.vue?a827","webpack:///src/components/LoginForm.vue","webpack:///./src/components/LoginForm.vue?cde7","webpack:///./src/components/LoginForm.vue","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticRenderFns","staticClass","on","$event","preventDefault","login","apply","arguments","username","model","value","callback","$$v","expression","password","persistent","alertCountDown","countDownChanged","_s","error","dismissSecs","name","data","computed","redirect","length","methods","remaining","doRedirect","router","component","components"],"mappings":"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","file":"js/chunk-2d2086b7.f0bdc0cd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"xl\"}},[_c('h1',[_vm._v(\"Sign in\")]),_c('login-form')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-form',{staticClass:\"login mb-3\",on:{\"submit\":function($event){$event.preventDefault();return _vm.login.apply(null, arguments)}}},[_c('b-form-group',{attrs:{\"label-for\":\"input-1\",\"label\":\"Username:\"}},[_c('b-input-group',[_c('b-input-group-prepend',{attrs:{\"is-text\":\"\"}},[_c('fa-icon',{attrs:{\"icon\":\"user\"}})],1),_c('b-form-input',{attrs:{\"id\":\"input-1\",\"state\":!!_vm.username,\"autocomplete\":\"username\",\"placeholder\":\"Enter your username\",\"type\":\"text\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}})],1)],1),_c('b-form-group',{attrs:{\"label-for\":\"input-2\",\"label\":\"Password:\"}},[_c('b-input-group',[_c('b-input-group-prepend',{attrs:{\"is-text\":\"\"}},[_c('fa-icon',{attrs:{\"icon\":\"key\"}})],1),_c('b-form-input',{attrs:{\"id\":\"input-2\",\"state\":!!_vm.password,\"autocomplete\":\"current-password\",\"placeholder\":\"Enter your password\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1),_c('b-input-group',[_c('b-form-checkbox',{attrs:{\"switch\":\"\"},model:{value:(_vm.persistent),callback:function ($$v) {_vm.persistent=$$v},expression:\"persistent\"}},[_vm._v(\"Remember me\")])],1),_c('b-form-row',[_c('b-col',{attrs:{\"cols\":\"3\",\"offset\":\"6\"}},[_c('b-button',{attrs:{\"block\":\"\",\"size\":\"lg\",\"type\":\"reset\",\"variant\":\"outline-danger\"}},[_vm._v(\"Reset\")])],1),_c('b-col',{attrs:{\"cols\":\"3\"}},[_c('b-button',{attrs:{\"block\":\"\",\"size\":\"lg\",\"type\":\"submit\",\"variant\":\"success\"}},[_vm._v(\"Login\")])],1)],1)],1),_c('b-alert',{attrs:{\"show\":_vm.alertCountDown,\"dismissible\":\"\",\"variant\":\"danger\"},on:{\"dismissed\":function($event){_vm.alertCountDown=0},\"dismiss-count-down\":_vm.countDownChanged}},[_c('p',[_vm._v(_vm._s(_vm.error))]),_c('b-progress',{attrs:{\"variant\":\"danger\",\"max\":_vm.dismissSecs,\"value\":_vm.alertCountDown,\"height\":\"4px\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-form class=\"login mb-3\" @submit.prevent=\"login\">\n      <b-form-group label-for=\"input-1\" label=\"Username:\">\n        <b-input-group>\n          <b-input-group-prepend is-text>\n            <fa-icon icon=\"user\"/>\n          </b-input-group-prepend>\n          <b-form-input id=\"input-1\" :state=\"!!username\" v-model=\"username\" autocomplete=\"username\" placeholder=\"Enter your username\" type=\"text\" />\n        </b-input-group>\n      </b-form-group>\n      <b-form-group label-for=\"input-2\" label=\"Password:\">\n        <b-input-group>\n          <b-input-group-prepend is-text>\n            <fa-icon icon=\"key\"/>\n          </b-input-group-prepend>\n          <b-form-input id=\"input-2\" :state=\"!!password\" v-model=\"password\" autocomplete=\"current-password\" placeholder=\"Enter your password\" type=\"password\" />\n        </b-input-group>\n      </b-form-group>\n      <b-input-group>\n        <b-form-checkbox v-model=\"persistent\" switch>Remember me</b-form-checkbox>\n      </b-input-group>\n      <b-form-row>\n        <b-col cols=\"3\" offset=\"6\"><b-button block size=\"lg\" type=\"reset\" variant=\"outline-danger\">Reset</b-button></b-col>\n        <b-col cols=\"3\"><b-button block size=\"lg\" type=\"submit\" variant=\"success\">Login</b-button></b-col>\n      </b-form-row>\n    </b-form>\n\n    <b-alert :show=\"alertCountDown\" dismissible variant=\"danger\" @dismissed=\"alertCountDown=0\" @dismiss-count-down=\"countDownChanged\">\n      <p>{{ error }}</p>\n      <b-progress variant=\"danger\" :max=\"dismissSecs\" :value=\"alertCountDown\" height=\"4px\"></b-progress>\n    </b-alert>\n  </div>\n</template>\n\n<script>\nimport { AUTH_CHECK } from '@/store/actions/auth'\nimport { createNamespacedHelpers } from 'vuex'\nimport axios from 'axios'\nimport router from '@/router'\nconst { mapGetters, mapActions } = createNamespacedHelpers('auth')\n\nexport default {\n  name: 'LoginForm',\n  data () {\n    return {\n      username: '',\n      password: '',\n      error: '',\n      persistent: false,\n      dismissSecs: 5,\n      alertCountDown: 0\n    }\n  },\n  computed: {\n    ...mapGetters(['user', 'viewer', 'admin']),\n    redirect () {\n      const redirect = this.$route.query.redirect\n      return !!redirect && redirect.length > 0 ? redirect : '/'\n    }\n  },\n  methods: {\n    login: async function () {\n      try {\n        const response = await axios.post('api/user', {\n          user: this.username,\n          password: this.password,\n          cookie: this.persistent ? 'permanent' : 'temporary' // 'return'\n        })\n\n        if (!!response.data && (response.data.viewer || response.data.admin)) {\n          await this.authCheck()\n          this.doRedirect()\n        } else {\n          throw new Error('Login attempt failed!')\n        }\n      } catch (error) {\n        this.error = error.toString()\n        this.alertCountDown = this.dismissSecs\n      }\n    },\n    countDownChanged (remaining) {\n      this.alertCountDown = remaining\n    },\n    ...mapActions({\n      authCheck: AUTH_CHECK\n    }),\n    doRedirect () {\n      router.push(this.redirect)\n    }\n  },\n  async mounted () {\n    try {\n      await this.authCheck()\n      if (this.admin) {\n        this.doRedirect()\n      }\n    } catch (error) {\n      this.error = error.toString()\n      this.alertCountDown = this.dismissSecs\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginForm.vue?vue&type=template&id=ad9ee340&\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <b-container fluid=\"xl\">\r\n    <h1>Sign in</h1>\r\n    <login-form></login-form>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport LoginForm from '@/components/LoginForm.vue'\r\n\r\nexport default {\r\n  components: { LoginForm }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=b983be1c&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}